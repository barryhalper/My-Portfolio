@model ProjectListViewModel

@{
    ViewBag.Title = "Projects";
   

}

@ViewBag.Files

<div id="project" class="jumbotron">

    <img srcset="/image/background/skills.jpg  1024w,
            /image/background/skills-medium.jpg 640w,
             /image/background/skills-small.jpg 320w"
         sizes="100vw"
         src="/image/background/skills-small.jpg" alt="skills" class="img-fluid" />
    <div class="container">
        <section class="page mb-3">

            <h1>@ViewBag.Title </h1>
        </section>
    </div>
</div>


<section>
    <div class="container  mt-3 " id="project-body">


        @foreach (var project in Model.Projects)
        {

            <div class="col-md-12">
                <div class="panel">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-md-10">
                                @project.Name
                            </div>
                            <div class="col-md-2">
                                <div class="float-right">
         
                                    <div class="dropdown">
                                        <button class="btn btn-primary dropdown-toggle" type="button" id="menu-@project.Id" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-info-square"></i> 
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="menu-@project.Id">

                                             @if (project.GetMediaByType("Website").Count() != 0) 
                                                {

                                                <a class="dropdown-item" href="#"><i class="fas fa-external-link-square"></i> Visit website</a>
                                                }

                                                @if (project.GetMediaByType("Video").Count() != 0)
                                                { 
                                                    <a class="dropdown-item video" href="#" data-src="@project.Video" data-title="@project.Name Promo Video"><i class="fas fa-play-circle"></i> Play video</a>
                                                }
                                                @if (project.GetMediaByType("Image").Count() != 0 )
                                                {

                                                    <a class="dropdown-item gallery" data-id="@project.Id" href="#" data-title="@project.Name Gallery "><i class="fas fa-images " ></i> View gallery</a>
                                                }
                                                @if (project.GetMediaByType("GitHub").Count() != 0)
                                                {
                                                    <a class="dropdown-item" href="#"><i class="fab fa-github-square"></i> View code</a>
                                                }
                                            </div>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel-body">

                        <div class="row">
                            <div class="col-md-6">
                                @project.Content
                                
                                <div class="d-none">
                                    <div class="carousel-container">
                                        <div id="carousel-@project.Id" class="carousel slide" data-ride="carousel">
                                            <div class="carousel-inner">
                                                @{
                                                    var i = 0;
                                                }
                                                @foreach (var img in project.GetImages(Model.Images))
                                                {
                                                    var active = (i == 0) ? "active" : "";
                                                    <!--Lazy load images by leaving the src blank write them to attribute on clicked -->
                                                    <div class="carousel-item @active">
                                                        <img class="d-block w-100" src="" data-src="@img" alt="@i @project.Name slide">
                                                    </div>
                                                    { i++; }

                                                }


                                            </div>
                                            <a class="carousel-control-prev" href="#carousel-@project.Id" role="button" data-slide="prev">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Previous</span>
                                            </a>
                                            <a class="carousel-control-next" href="#carousel-@project.Id" role="button" data-slide="next">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Next</span>
                                            </a>
                                        </div>

                                    </div>
                                </div>

                            </div>

                            <div class="col-md-6">
                                <img src="~/image/projects/@project.FirstImage" alt="@project.Name" class="img-fluid" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }

    </div>


</section>

@section Scripts{
    <partial name="_Modal" />
}
